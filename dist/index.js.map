{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/style-inject/dist/style-inject.es.js","../node_modules/vist/dist/index.es.js","../src/Vlist.tsx","../src/VSelect.tsx"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { createRef, createElement, Component } from 'react';\nimport { BehaviorSubject, combineLatest, fromEvent, ReplaySubject } from 'rxjs';\nimport { debounceTime, filter, map, skipWhile, startWith, tap, withLatestFrom } from 'rxjs/operators';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css = \".VirtualList_VirtualList__1SA8j {\\n  overflow-y: auto;\\n}\\n\\n.VirtualList_VirtualListContainer__xe2yw {\\n  position: relative;\\n}\\n\\n.VirtualList_VirtualListPlaceholder__12jc2 {\\n  position: absolute;\\n  width: 100%;\\n}\\n\";\nvar style = {\"VirtualList\":\"VirtualList_VirtualList__1SA8j\",\"VirtualListContainer\":\"VirtualList_VirtualListContainer__xe2yw\",\"VirtualListPlaceholder\":\"VirtualList_VirtualListPlaceholder__12jc2\"};\nstyleInject(css);\n\nvar VirtualList = /** @class */ (function (_super) {\r\n    __extends(VirtualList, _super);\r\n    function VirtualList() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            data: [],\r\n            scrollHeight: 0\r\n        };\r\n        // snapshot of data property in state\r\n        _this.stateDataSnapshot = [];\r\n        // snapshot of actualRows\r\n        _this.actualRowsSnapshot = 0;\r\n        // record data reference\r\n        _this.dataReference = [];\r\n        // container dom instance\r\n        _this.virtualListRef = createRef();\r\n        // container height\r\n        _this.containerHeight$ = new BehaviorSubject(0);\r\n        // last first index of data for the first element of the virtual list\r\n        _this.lastFirstIndex = -1;\r\n        // record the position of last scroll\r\n        _this.lastScrollPos = 0;\r\n        // options$ to keep the latest options from the input\r\n        _this.options$ = new ReplaySubject(1);\r\n        _this._subs = [];\r\n        return _this;\r\n    }\r\n    VirtualList.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        var virtualListElm = this.virtualListRef.current;\r\n        this._subs.push(this.props.options$.pipe(tap(function (options) {\r\n            if (options.height === undefined) {\r\n                throw new Error('Vist needs a height property in options$');\r\n            }\r\n        }), map(function (options) {\r\n            var opt = Object.assign({}, options);\r\n            opt.sticky = opt.sticky === undefined ? true : opt.sticky;\r\n            opt.spare = opt.spare === undefined ? 3 : opt.spare;\r\n            opt.startIndex = opt.startIndex === undefined ? 0 : opt.startIndex;\r\n            opt.resize = opt.resize === undefined ? true : opt.resize;\r\n            return opt;\r\n        })).subscribe(function (opt) { return _this.options$.next(opt); }));\r\n        // window resize\r\n        this._subs.push(fromEvent(window, 'resize').pipe(withLatestFrom(this.options$), skipWhile(function (_a) {\r\n            var _ = _a[0], options = _a[1];\r\n            return !options.resize;\r\n        }), startWith(null), debounceTime(200), map(function () { return _this.containerHeight$.next(virtualListElm.clientHeight); })).subscribe());\r\n        // scroll events\r\n        var scrollEvent$ = fromEvent(virtualListElm, 'scroll').pipe(startWith({ target: { scrollTop: this.lastScrollPos } }));\r\n        // scroll top\r\n        var scrollTop$ = scrollEvent$.pipe(map(function (e) { return e.target.scrollTop; }));\r\n        // scroll to the given position\r\n        this._subs.push(this.options$.pipe(filter(function (option) { return option.startIndex !== undefined; }), map(function (option) { return option.startIndex * option.height; })\r\n        // setTimeout to make sure the list is already rendered\r\n        ).subscribe(function (scrollTop) { return setTimeout(function () { return virtualListElm.scrollTo(0, scrollTop); }); }));\r\n        // let the scroll bar stick the top\r\n        this._subs.push(this.props.data$.pipe(withLatestFrom(this.options$), filter(function (_a) {\r\n            var _ = _a[0], options = _a[1];\r\n            return Boolean(options.sticky);\r\n        })).subscribe(function () { return setTimeout(function () { return virtualListElm.scrollTo(0, 0); }); }));\r\n        // scroll direction Down/Up\r\n        var scrollDirection$ = scrollTop$.pipe(map(function (scrollTop) {\r\n            var dir = scrollTop - _this.lastScrollPos;\r\n            _this.lastScrollPos = scrollTop;\r\n            return dir > 0 ? 1 : -1;\r\n        }));\r\n        // actual rows\r\n        var actualRows$ = combineLatest(this.containerHeight$, this.options$).pipe(map(function (_a) {\r\n            var ch = _a[0], option = _a[1];\r\n            return Math.ceil(ch / option.height) + (option.spare || 3);\r\n        }));\r\n        // data indexes in view\r\n        var indexes$ = combineLatest(scrollTop$, this.options$).pipe(\r\n        // the index of the top elements of the current list\r\n        map(function (_a) {\r\n            var st = _a[0], options = _a[1];\r\n            return Math.floor(st / options.height);\r\n        }));\r\n        // if it's necessary to update the view\r\n        var shouldUpdate$ = combineLatest(indexes$, this.props.data$, actualRows$).pipe(map(function (_a) {\r\n            var curIndex = _a[0], data = _a[1], actualRows = _a[2];\r\n            // the first index of the virtualList on the last screen, if < 0, reset to 0\r\n            var maxIndex = data.length - actualRows < 0 ? 0 : data.length - actualRows;\r\n            return [curIndex > maxIndex ? maxIndex : curIndex, actualRows];\r\n        }), \r\n        // if the index or actual rows changed, then update\r\n        filter(function (_a) {\r\n            var curIndex = _a[0], actualRows = _a[1];\r\n            return curIndex !== _this.lastFirstIndex || actualRows !== _this.actualRowsSnapshot;\r\n        }), \r\n        // update the index\r\n        tap(function (_a) {\r\n            var curIndex = _a[0];\r\n            return _this.lastFirstIndex = curIndex;\r\n        }), map(function (_a) {\r\n            var firstIndex = _a[0], actualRows = _a[1];\r\n            var lastIndex = firstIndex + actualRows - 1;\r\n            return [firstIndex, lastIndex];\r\n        }));\r\n        // data slice in the view\r\n        var dataInViewSlice$ = combineLatest(this.props.data$, this.options$, shouldUpdate$).pipe(withLatestFrom(scrollDirection$, actualRows$), map(function (_a) {\r\n            var _b = _a[0], data = _b[0], options = _b[1], _c = _b[2], firstIndex = _c[0], lastIndex = _c[1], dir = _a[1], actualRows = _a[2];\r\n            var dataSlice = _this.stateDataSnapshot;\r\n            // compare data reference, if not the same, then update the list\r\n            var dataReferenceIsSame = data === _this.dataReference;\r\n            // fill the list\r\n            if (!dataSlice.length || !dataReferenceIsSame || actualRows !== _this.actualRowsSnapshot) {\r\n                if (!dataReferenceIsSame) {\r\n                    _this.dataReference = data;\r\n                }\r\n                if (actualRows !== _this.actualRowsSnapshot) {\r\n                    _this.actualRowsSnapshot = actualRows;\r\n                }\r\n                return _this.stateDataSnapshot = data.slice(firstIndex, lastIndex + 1).map(function (item) { return ({\r\n                    origin: item,\r\n                    $pos: firstIndex * options.height,\r\n                    $index: firstIndex++\r\n                }); });\r\n            }\r\n            // reuse the existing elements\r\n            var diffSliceIndexes = _this.getDifferenceIndexes(dataSlice, firstIndex, lastIndex);\r\n            var newIndex = dir > 0 ? lastIndex - diffSliceIndexes.length + 1 : firstIndex;\r\n            diffSliceIndexes.forEach(function (index) {\r\n                var item = dataSlice[index];\r\n                item.origin = data[newIndex];\r\n                item.$pos = newIndex * options.height;\r\n                item.$index = newIndex++;\r\n            });\r\n            return _this.stateDataSnapshot = dataSlice;\r\n        }));\r\n        // total height of the virtual list\r\n        var scrollHeight$ = combineLatest(this.props.data$, this.options$).pipe(map(function (_a) {\r\n            var data = _a[0], option = _a[1];\r\n            return data.length * option.height;\r\n        }));\r\n        // subscribe to update the view\r\n        this._subs.push(combineLatest(dataInViewSlice$, scrollHeight$)\r\n            .subscribe(function (_a) {\r\n            var data = _a[0], scrollHeight = _a[1];\r\n            return _this.setState({ data: data, scrollHeight: scrollHeight });\r\n        }));\r\n    };\r\n    VirtualList.prototype.componentWillUnmount = function () {\r\n        this._subs.forEach(function (stream$) { return stream$.unsubscribe(); });\r\n        this.containerHeight$.complete();\r\n    };\r\n    VirtualList.prototype.render = function () {\r\n        var _this = this;\r\n        return (createElement(\"div\", { className: style.VirtualList, ref: this.virtualListRef, style: this.props.style },\r\n            createElement(\"div\", { className: style.VirtualListContainer, style: { height: this.state.scrollHeight } }, this.state.data.map(function (data, i) {\r\n                return createElement(\"div\", { key: i, className: style.VirtualListPlaceholder, style: { transform: \"translateY(\" + data.$pos + \"px)\" } }, data.origin !== undefined ? _this.props.children(data.origin, data.$index) : null);\r\n            }))));\r\n    };\r\n    VirtualList.prototype.getDifferenceIndexes = function (slice, firstIndex, lastIndex) {\r\n        var indexes = [];\r\n        slice.forEach(function (item, i) {\r\n            if (item.$index < firstIndex || item.$index > lastIndex) {\r\n                indexes.push(i);\r\n            }\r\n        });\r\n        return indexes;\r\n    };\r\n    return VirtualList;\r\n}(Component));\n\nexport { VirtualList };\n//# sourceMappingURL=index.es.js.map\n","import * as React from 'react';\nimport { MouseEvent, ReactNode } from 'react';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { delay, map, throttleTime } from 'rxjs/operators';\nimport { IVirtualListOptions, VirtualList } from 'vist';\nimport style from './styles.css';\n\ninterface IVlistProps<T> {\n  data$: Observable<T[]>;\n  value: any;\n  onChange: (v: T) => void;\n  keyProp: any;\n  itemHeight?: number;\n  index: number;\n  emptyTpl?: ReactNode;\n  // use to tell virtual list to refresh options\n  refresh$: Observable<void>;\n}\n\ninterface IVlistState {\n  options: IVirtualListOptions;\n  options$: BehaviorSubject<IVirtualListOptions>;\n  isEmpty: boolean;\n}\n\nexport class Vlist<T> extends React.Component<IVlistProps<T>, IVlistState> {\n  state = {\n    options: { height: this.props.itemHeight || 32, resize: false },\n    options$: new BehaviorSubject<IVirtualListOptions>({ height: this.props.itemHeight || 32 }),\n    isEmpty: false\n  };\n\n  private readonly options$: Observable<IVirtualListOptions>;\n  private _sub: Subscription[] = [];\n\n  constructor(props: any) {\n    super(props);\n\n    this.onSelect = this.onSelect.bind(this);\n\n    // to prevent many options at one time\n    this.options$ = this.state.options$.pipe(throttleTime(10));\n  }\n\n  static getDerivedStateFromProps<T>(props: IVlistProps<T>, state: IVlistState) {\n    const options = { ...state.options };\n    let changed = false;\n\n    if (props.itemHeight !== undefined && props.itemHeight !== options.height) {\n      options.height = props.itemHeight;\n      changed = true;\n    }\n\n    if (props.index !== options.startIndex) {\n      options.startIndex = props.index;\n      changed = true;\n    }\n\n    if (changed) {\n      state.options$.next(options);\n    }\n\n    return changed ? { options } : null;\n  }\n\n  private static preventDefault(e: MouseEvent) {\n    e.preventDefault();\n  }\n\n  componentDidMount(): void {\n    this._sub.push(\n      this.props.data$.pipe(\n        map(data => !Boolean(data.length))\n      ).subscribe(isEmpty => this.setState({ isEmpty }))\n    );\n\n    this._sub.push(\n      this.props.refresh$\n        .pipe(delay(1))\n        .subscribe(() => this.state.options$.next(this.state.options))\n    );\n  }\n\n  componentWillUnmount(): void {\n    this._sub.forEach(s => s.unsubscribe());\n  }\n\n  render() {\n    const itemHeight = this.props.itemHeight || 32;\n\n    return (\n      <div className=\"ant-dropdown-menu\" onMouseDown={Vlist.preventDefault}>\n        {!this.state.isEmpty ? (\n          <VirtualList\n            data$={this.props.data$}\n            options$={this.options$}\n            style={{ maxHeight: 250 }}\n          >\n            {(item: T) => (\n              <div\n                style={{ height: itemHeight }}\n                className={this.getItemClassName(item)}\n                onClick={() => this.onSelect(item)}\n              >\n                {(this.props.children as any)(item)}\n              </div>\n            )}\n          </VirtualList>\n        ) : (\n          <div className={style.VListItemDisabled}>\n            {this.props.emptyTpl ? this.props.emptyTpl : '无匹配项目'}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  private getItemClassName<T>(item: T) {\n    const clsName =\n      (this.props.keyProp ? item[this.props.keyProp] : item) === this.props.value ? style.VListItemActivated : '';\n\n    return [clsName, style.VlistItem].join(' ');\n  }\n\n  private onSelect(e: T) {\n    this.props.onChange(e);\n  }\n}\n","import { Dropdown, Icon, Input } from 'antd';\nimport * as React from 'react';\nimport { ChangeEvent, MouseEvent, ReactNode } from 'react';\nimport { BehaviorSubject, combineLatest, Observable, Subject, Subscription } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\nimport style from './styles.css';\nimport { Vlist } from './Vlist';\n\nexport interface IVSelectProps<T> {\n  placeholder?: string;\n  value?: string | number | undefined;\n  onChange?: (v?: T) => void;\n  dataSource: T[];\n  // use to identify which property should be used as value\n  keyProp?: keyof T;\n  // which field to show in the input box\n  displayProp?: keyof T;\n  style?: any;\n  className?: string;\n  // for vist, default is 32px\n  itemHeight?: number;\n  allowClear?: boolean;\n  disabled?: boolean;\n  emptyTpl?: ReactNode;\n}\n\ninterface IVSelectState<T> {\n  // display value\n  value: string | number | undefined;\n  isEdit: boolean;\n  visible: boolean;\n  changingValue: string | undefined;\n  dataSource: T[] | undefined;\n  dataSource$: BehaviorSubject<T[]>;\n  inputValue: string | number | undefined;\n  // real value\n  realValue: string | number | undefined;\n  index: number;\n}\n\nexport class VSelect<T> extends React.Component<IVSelectProps<T>, IVSelectState<T>> {\n  state = {\n    value: undefined,\n    isEdit: false,\n    visible: false,\n    changingValue: undefined,\n    dataSource: undefined,\n    dataSource$: new BehaviorSubject<T[]>([]),\n    inputValue: undefined,\n    realValue: undefined,\n    index: 0\n  };\n\n  private _sub: Subscription[] = [];\n  private inputRef = React.createRef<Input>();\n  private changingValue$ = new BehaviorSubject<string>('');\n  private data$: Observable<T[]>;\n  private refresh$ = new Subject<void>();\n\n  constructor(props: any) {\n    super(props);\n\n    this.onVisibleChange = this.onVisibleChange.bind(this);\n    this.onInput = this.onInput.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.clearValue = this.clearValue.bind(this);\n    this.onRefresh = this.onRefresh.bind(this);\n  }\n\n  static getDerivedStateFromProps<T>(props: IVSelectProps<T>, state: IVSelectState<T>) {\n    // if props value has change, then change the state value\n    if (props.value !== state.inputValue) {\n      state.inputValue = props.value;\n      state.realValue = props.value;\n      Object.assign(state, VSelect.updateIndex(props));\n    }\n\n    if (props.dataSource !== state.dataSource) {\n      state.dataSource = props.dataSource;\n      state.dataSource$.next(props.dataSource);\n      Object.assign(state, VSelect.updateIndex(props));\n    }\n\n    return state;\n  }\n\n  // get value and index\n  private static getValueAndIndex<T>(\n    value: string | number | undefined,\n    dataSource: T[],\n    keyProp?: keyof T,\n    displayProp?: keyof T\n  ): [string | number | undefined, number] {\n    const index = dataSource.findIndex(source => {\n      const x = keyProp ? source[keyProp] : source;\n      return x as any === value;\n    });\n\n    if (index === -1) {\n      return [undefined, 0];\n    }\n\n    const item = dataSource[index];\n\n    return [(displayProp ? (item as T)[displayProp] : item) as any, index];\n  }\n\n  private static updateIndex<T>(props: IVSelectProps<T>) {\n    // if cannot get the value, use the given value\n    const [v, index] = VSelect.getValueAndIndex<T>(props.value, props.dataSource, props.keyProp, props.displayProp);\n\n    return {\n      value: v || props.value,\n      index\n    };\n  }\n\n  componentDidMount(): void {\n    this._sub.push(\n      this.changingValue$.subscribe(v => this.setState({ changingValue: v }))\n    );\n\n    this.data$ = combineLatest(\n      this.state.dataSource$,\n      this.changingValue$.pipe(distinctUntilChanged())\n    ).pipe(\n      map(([dataSource, changingValue]) => changingValue ? dataSource.filter(source => {\n        const item = this.props.displayProp ? source[this.props.displayProp] : source;\n        return item.toString().toLowerCase().includes(changingValue.toString().toLowerCase());\n      }) : dataSource)\n    );\n  }\n\n  componentWillUnmount(): void {\n    this._sub.forEach(s => s.unsubscribe());\n  }\n\n  render() {\n    const isShowPlaceholder = this.state.value !== undefined || this.state.changingValue ? 'none' : 'block';\n    const isShowValuePlaceholder = this.state.value !== undefined && !this.state.changingValue ? 'block' : 'none';\n    const isShowInput = this.state.isEdit ? 'block' : 'none';\n    const isShowClearBtn = this.props.allowClear && this.state.value;\n\n    const cls = [\n      this.props.className,\n      'ant-select',\n      this.props.disabled ? 'ant-select-disabled' : 'ant-select-enabled',\n      this.props.allowClear ? 'ant-select-allow-clear' : '',\n      this.state.visible ? 'ant-select-open ant-select-focused' : '',\n      this.state.visible ? style.VSelectOpen : ''\n    ].join(' ');\n\n    const showAction = this.props.disabled ? [] : ['click'];\n\n    return (\n      <Dropdown\n        overlay={\n          <Vlist\n            data$={this.data$}\n            children={this.props.children}\n            keyProp={this.props.keyProp}\n            value={this.state.realValue}\n            itemHeight={this.props.itemHeight}\n            index={this.state.index}\n            emptyTpl={this.props.emptyTpl}\n            onChange={this.onChange}\n            refresh$={this.refresh$}\n          />\n        }\n        // prevent default behavior\n        trigger={[]}\n        // @ts-ignore\n        showAction={showAction}\n        hideAction={['blur']}\n        visible={this.state.visible}\n        onVisibleChange={this.onVisibleChange}\n      >\n        <div style={this.props.style} className={cls} onClick={this.onRefresh} onBlur={this.onRefresh}>\n          <div className=\"ant-select-selection ant-select-selection--single\">\n            <div className=\"ant-select-selection__rendered\">\n              {/* placeholder */}\n              <div className=\"ant-select-selection__placeholder\"\n                   style={{ display: isShowPlaceholder }}>\n                {this.props.placeholder}\n              </div>\n\n              {/* value placeholder */}\n              <div className=\"ant-select-selection-selected-value\"\n                   style={{ display: isShowValuePlaceholder, opacity: this.state.isEdit ? 0.4 : 1 }}>\n                {this.state.value}\n              </div>\n\n              {/* input placeholder */}\n              <div className=\"ant-select-search ant-select-search--inline\" style={{ display: isShowInput }}>\n                <div className=\"ant-select-search__field__wrap\">\n                  <Input\n                    ref={this.inputRef}\n                    className={['ant-select-search__field', style.VSelectInput].join(' ')}\n                    value={this.state.changingValue}\n                    onChange={this.onInput}\n                  />\n                </div>\n              </div>\n            </div>\n\n            {isShowClearBtn && (\n              <span className=\"ant-select-selection__clear\" onClick={this.clearValue}>\n                <Icon type=\"close-circle\" theme=\"filled\" className=\"ant-select-clear-icon\"/>\n              </span>\n            )}\n            <span className={['ant-select-arrow', style.VSelectArrow].join(' ')}>\n              <Icon type=\"down\"/>\n            </span>\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  private onVisibleChange(visible: boolean) {\n    if (visible === this.state.visible) {\n      return;\n    }\n\n    if (visible) {\n      const ref = this.inputRef.current;\n      if (ref) {\n        setTimeout(() => ref.focus());\n      }\n      this.setState({ isEdit: true });\n    } else {\n      // clear temp value\n      this.changingValue$.next('');\n      this.setState({ isEdit: false });\n    }\n\n    this.setState({ visible });\n  }\n\n  private onInput(e: ChangeEvent) {\n    this.changingValue$.next((e.target as any).value);\n  }\n\n  private onChange(v: T) {\n    // use to output\n    const output: any = this.props.keyProp ? v[this.props.keyProp] : v;\n    // use to display\n    const value: any = this.props.displayProp ? v[this.props.displayProp] : v;\n\n    if (this.props.onChange) {\n      this.props.onChange(output);\n    }\n\n    setTimeout(() => this.onVisibleChange(false));\n\n    this.setState({ value, realValue: output });\n    this.changingValue$.next('');\n  }\n\n  private clearValue(e: MouseEvent) {\n    // stop popup\n    e.stopPropagation();\n\n    this.setState({ value: undefined });\n\n    if (this.props.onChange) {\n      this.props.onChange(undefined);\n    }\n  }\n\n  private onRefresh() {\n    // emit next tick, because vlist may not mount yet.\n    setTimeout(() => this.refresh$.next());\n  }\n}\n"],"names":["extendStatics","__extends","styleInject","css","style","createRef","BehaviorSubject","ReplaySubject","tap","map","fromEvent","withLatestFrom","skipWhile","startWith","debounceTime","filter","combineLatest","createElement","Component","tslib_1.__extends","throttleTime","delay","React.createElement","React.Component","React.createRef","Subject","distinctUntilChanged","Dropdown","Input","Icon"],"mappings":"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"}